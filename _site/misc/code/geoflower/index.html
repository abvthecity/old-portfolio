<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />
  <title>Geometric Flower</title>
  <meta name="description" content="Andrew's Portfolio">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <script src="https://use.typekit.net/tgi3xpz.js"></script>
  <script>try{Typekit.load({ async: true });}catch(e){}</script>
  <link rel="stylesheet" type="text/css" href="/css/main.css"/>
  <link rel="canonical" href="http://andrewjiang.com/misc/code/geoflower">
  <link rel="icon" type="image/png" href="/assets/favicon.png" />
  

</head>
<body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46842926-1', 'auto');
  ga('send', 'pageview');

</script>

<header class="site-header">

<nav style="position:fixed;">
  <ul>
    <li><a href="/" data-title="Andrew Jiang">Andrew Jiang</a></li>
    <li><a href="/hello/resume" target="_blank" data-title="Résumé">Résumé</a>
      <ul><li><a href="/hello">About</a></li><li><a href="/hello/email" target="_blank">Email me</a></li><li><a href="/hello/linkedin" target="_blank">LinkedIn</a></li><li><a href="/hello/twitter" target="_blank">Twitter</a></li></ul>
    </li>
    
    <li><a href="/code" data-title="code">Code</a>
      <ul>
      <li><a href="/code/web/hackschedule"><span>web / </span>hackSChedule</a></li><li><a href="/code/web/uniclubs"><span>web / </span>Uniclubs</a></li>
      <li><a href="/code"><b>See more...</b></a></li>
      </ul>
    </li>
    
    <li><a href="/design" data-title="design">Design</a>
      <ul>
      <li><a href="/design/print/1kp2015"><span>print / </span>1000 Pitches 2015</a></li><li><a href="/design/apps/pinpoint"><span>apps / </span>Pinpoint</a></li><li><a href="/design/print/portfolio2015"><span>print / </span>Portfolio 2015</a></li><li><a href="/design/print/yb2015"><span>print / </span>Lost in the World</a></li><li><a href="/design/web/journo"><span>web / </span>Charger Account</a></li>
      <li><a href="/design"><b>See more...</b></a></li>
      </ul>
    </li>
    
    <li><a href="/misc" data-title="misc" class="sel">Misc</a>
      <ul>
      <li><a href="/misc/photo/china2015"><span>photo / </span>China 2015</a></li><li><a href="/misc/code/sinewave"><span>code / </span>Sine Wave</a></li><li><a href="/misc/code/geoflower"><span>code / </span>Geometric Flower</a></li><li><a href="/misc/photo/vsco"><span>photo / </span>VSCO Grid</a></li><li><a href="/misc/photo/yb2015"><span>photo / </span>Leland Football</a></li>
      <li><a href="/misc"><b>See more...</b></a></li>
      </ul>
    </li>
    
    <li><a href="/blog" data-title="blog">Blog</a>
      <ul>
      
      <li><a href="/blog"><b>See more...</b></a></li>
      </ul>
    </li>
    

    <li><a href="/hello/github" data-title="Github" target="_blank">Github</a></li>
  </ul>
</nav>

</header>


<main>
<style>
	body {
		height:100%;
		padding-bottom:1770px;
		background-color:#FFF
	}
	#tree {
		position:fixed;
		left:0;right:0;top:0;bottom:0;

	}
	#links {
		position:fixed;
		bottom:20px;
		right:20px;
		z-index:99;
		text-align:right;
		font-weight:bold;
		text-transform:uppercase;
		font-size:1.4em;
	    -webkit-touch-callout: none;
	    -webkit-user-select: none;
	    -khtml-user-select: none;
	    -moz-user-select: none;
	    -ms-user-select: none;
	    user-select: none;
	}
	#links li {
		cursor:pointer;
		padding:0px;
	}
	#links li:hover { text-decoration:underline; }

	.info {
		position: fixed;
		top: 60px;
		right: -5px;
		font-size: 20px;
		transform: rotate(90deg);
		-webkit-transform: rotate(90deg);
	}

	.info > span:after {
		display: inline;
		position: relative;
		margin-left: 15px;
		content: "\2192";
	}
</style>

<ul id="links">
	<li onclick="javascript:randomizeColor();">Change Color</li>
	<li onclick="javascript:scrollToLoc(250-250);">16.67 deg</li>
	<li onclick="javascript:scrollToLoc(675-250);">45 deg</li>
	<li onclick="javascript:scrollToLoc(900-250);">60 deg</li>
	<li onclick="javascript:scrollToLoc(1080-250);">72 deg</li>
	<li onclick="javascript:scrollToLoc(1350-250);">90 deg</li>
	<li onclick="javascript:scrollToLoc(1800-250);">120 deg</li>
	<li onclick="javascript:scrollToLoc(2020-250);">134.67 deg</li>
</ul>
<canvas id="tree"></canvas>
<div class="info"><span>Scroll</span></div>

<script>


var tree = document.getElementById("tree");
var context  = tree.getContext("2d");

var r = 0, g = 0, b = 0;

function randomizeColor() {
	r = Math.floor(Math.random()*255);
	g = Math.floor(Math.random()*255);
	b = Math.floor(Math.random()*255);
	lum = (r*0.299 + g*0.587 + b*0.114) / 256; // weighted luminance
	if (lum > 0.3 || lum < .05) randomizeColor(); // select only semi-dark colors.
	document.body.style.color = "rgba("+r+","+g+","+b+",1)";
	document.body.style.background = "rgba("+(255-r)+","+(255-g)+","+(255-b)+",1)";
	animateTree((window.scrollY+250)/10);
}


randomizeColor();

function rsize(){ 
	tree.width  = window.innerWidth;
	tree.height = window.innerHeight;
	context.translate(tree.width/2,tree.height/2);

	animate = 0;
	animateTree((window.scrollY+250)/10);

} document.onLoad = rsize(); window.addEventListener("resize", rsize);

function rscroll(){
	animate = window.scrollY;
	animateTree((animate+250)/10);
} window.addEventListener("scroll", rscroll);

function animateTree(animate) {

	angle = Math.PI*(animate/1.5)/180;

	context.clearRect ( -tree.width/2, -tree.width/2, tree.width*2, tree.height*2 );

	var unit = Math.sqrt(tree.width*tree.width + tree.height*tree.height)/100*(2.3);

	function createBranch(x,y,phi,h,theta,index){
		// x,y is the origin
		// phi is the anglular direction at the origin (radians)
		// h is the length of one twig (lets call it the hypothenuse)
		// theta is half angle between the two twigs that make up a branch (radians)

		if(index >= 9) return;

		var x_left = x + h*Math.sin(phi + theta);
		var y_left = -(y + h*Math.cos(phi + theta));
		var x_right = x - h*Math.sin(-phi + theta);
		var y_right =  -(y + h*Math.cos(-phi + theta));


		context.beginPath();

		context.moveTo(x,-y);
		context.lineTo(x_left, y_left);
		context.moveTo(x,-y);
		context.lineTo(x_right,y_right);

		alpha = 1 - index/9;
		context.strokeStyle = "rgba("+r+","+g+","+b+","+alpha+")";

		context.lineWidth = 2;
		context.stroke();

		createBranch(x_left,-y_left,phi+theta,h,theta,index+1);
		createBranch(x_right,-y_right,phi-theta,h,theta,index+1);

	}


	createBranch(0,0,0,unit,angle,0);

}

function scrollToLoc(loc) {
	var go = setInterval(function(){
		scrollLength = loc-window.scrollY;
		scrollMargin = 0;
		if(scrollLength < 0) animate = window.scrollY-10;
		else if(scrollLength > 0) animate = window.scrollY+10;

		if(scrollLength <= 10 && scrollLength >= -10) window.scrollTo(0,loc);
		else window.scrollTo(0,animate);
		if(window.scrollY == loc) clearInterval(go);
	},1);
}

</script>
</main>




</body> 
</html>
